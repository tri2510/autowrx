{
  "version": 3,
  "sources": ["src/index.ts", "src/components/Page.tsx"],
  "sourcesContent": ["import * as ReactDOM from 'react-dom/client'\nimport * as React from 'react'\nimport Page from './components/Page'\n\nexport const components = { Page }\n\nexport function mount(el: HTMLElement, props?: any) {\n  const root = ReactDOM.createRoot(el)\n  root.render(React.createElement(Page as any, props || {}))\n  ;(el as any).__aw_root = root\n}\n\nexport function unmount(el: HTMLElement) {\n  const r = (el as any).__aw_root\n  if (r && r.unmount) r.unmount()\n  delete (el as any).__aw_root\n}\n\n// Optional global registration\nif (typeof window !== 'undefined') {\n  ;(window as any).DAPlugins = (window as any).DAPlugins || {}\n  ;(window as any).DAPlugins['page-plugin'] = { components, mount, unmount }\n}\n\n\n", "// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst React: any = (globalThis as any).React;\nimport Box from './Box';\nimport { supportedCertivityApis, supportedCertivityApis_v4_map } from '../certivityApis';\n\n// For bundling npm packages: Install them in the plugin directory\n// For using host packages: Add them to EXTERNAL_PACKAGES in build.sh\n// Example with external package (assumes dayjs is in host):\n// const dayjs = require('dayjs');\n\n/**\n * Plugin API provided by the host application\n * Limited to:\n * 1. Update model/prototype data\n * 2. Read & Write vehicle API information\n */\ntype PluginAPI = {\n  // Model & Prototype Updates\n  updateModel?: (updates: any) => Promise<any>;\n  updatePrototype?: (updates: any) => Promise<any>;\n\n  // Vehicle API Operations (Read)\n  getComputedAPIs?: (model_id?: string) => Promise<any>;\n  getApiDetail?: (api_name: string, model_id?: string) => Promise<any>;\n  listVSSVersions?: () => Promise<string[]>;\n};\n\ntype PageProps = {\n  data?: any;\n  config?: any;\n  api?: PluginAPI;\n};\n\nconst getApiTypeClasses = (type: string) => {\n  switch (type) {\n    case 'branch':\n      return { bgClass: '', textClass: 'text-purple-500' }\n    case 'actuator':\n      return { bgClass: '', textClass: 'text-yellow-500' }\n    case 'sensor':\n      return { bgClass: '', textClass: 'text-emerald-500' }\n    case 'attribute':\n      return { bgClass: '', textClass: 'text-sky-500' }\n    case 'Atomic Service':\n      return { bgClass: '', textClass: 'text-purple-500' }\n    case 'Basic Service':\n      return { bgClass: '', textClass: 'text-emerald-500' }\n    default:\n      return { bgClass: '', textClass: 'text-da-gray-medium' }\n  }\n}\n\nconst logos = [\n  {\n    src: 'https://bewebstudio.digitalauto.tech/data/projects/TQUHL1DoUNoI/digital.auto.png',\n    name: 'DigitalAuto',\n    href: 'https://www.digital-auto.org/',\n  },\n  {\n    src: 'https://bewebstudio.digitalauto.tech/data/projects/TQUHL1DoUNoI/certivity.png',\n    name: 'Certivity',\n    href: 'https://www.certivity.io/',\n  },\n  {\n    src: 'https://bewebstudio.digitalauto.tech/data/projects/TQUHL1DoUNoI/AlephAlpha.png',\n    name: 'Aleph Alpha',\n    href: 'https://aleph-alpha.com/',\n  },\n  { src: 'https://bewebstudio.digitalauto.tech/data/projects/TQUHL1DoUNoI/ETAS.png', \n    name: 'ETAS', \n    href: 'https://www.etas.com/en/' },\n]\n\n\nexport default function Page({ data, config, api }: PageProps) {\n\n  const [vssApis, setVssApis] = React.useState([]);\n  const [selectedApis, setSelectedApis] = React.useState(new Set());\n\n  // Watch for changes to data?.prototype?.apis?.VSS and update vssApis\n  React.useEffect(() => {\n    const vssApisData = data?.prototype?.apis?.VSS || [];\n    setVssApis(vssApisData);\n  }, [data?.prototype?.apis?.VSS]);\n\n  // Handle individual checkbox toggle\n  const handleToggleApi = (apiName: string) => {\n    setSelectedApis((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(apiName)) {\n        newSet.delete(apiName);\n      } else {\n        newSet.add(apiName);\n      }\n      return newSet;\n    });\n  };\n\n  // Handle select all\n  const handleSelectAll = () => {\n    if (selectedApis.size === vssApis.length) {\n      // If all are selected, clear selection\n      setSelectedApis(new Set());\n    } else {\n      // Select all\n      const allApiNames = vssApis.map((api) => api.name || api);\n      setSelectedApis(new Set(allApiNames));\n    }\n  };\n\n  // Handle clear selection\n  const handleClearSelection = () => {\n    setSelectedApis(new Set());\n  };\n\n  // Get API name (handle both string and object formats)\n  const getApiName = (api: any): string => {\n    return typeof api === 'string' ? api : api.name || '';\n  };\n\n  // Get API type (ACTUATOR, SENSOR, etc.)\n  const getApiType = (api: any): string => {\n    if (typeof api === 'string') return 'ACTUATOR'; // Default if not specified\n    return api.type || api.datatype || 'ACTUATOR';\n  };\n\n  // Initialize prototype name from data\n  React.useEffect(() => {\n    console.log('prototype data', data?.prototype);\n  }, [data?.prototype]);\n\n  React.useEffect(() => {\n    console.log('model data', data?.model);\n  }, [data?.model]);\n\n\n  if (!data?.prototype?.name) {\n    return (\n      <div className=\"h-full w-full bg-slate-200 p-2 flex text-black\"\n        style={{}}>\n        <div className=\"bg-white shadow-lg rounded-lg w-full h-full flex items-start justify-start px-4 py-4 overflow-auto\">\n          <h1 className=\"text-2xl font-bold text-slate-700\">No Data Found</h1>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full w-full bg-slate-200 p-2 flex text-black\"\n      style={{}}>\n      <div className=\"bg-white shadow-lg rounded-lg w-full h-full flex gap-4 px-4 py-4\">\n        <div className=\"w-1/2 h-full flex flex-col gap-4\">\n          <div className=\"flex-1 flex flex-col rounded-lg p-2\"\n            style={{ backgroundColor: 'rgba(225, 231, 239, 0.2)' }}>\n            {/* Header */}\n            <div className=\"flex items-center justify-between mb-3\">\n              <h2 className=\"text-lg font-bold text-slate-700\">Used Signals ({vssApis.length})</h2>\n              <div className=\"flex items-center gap-3\">\n                <label className=\"flex items-center gap-1 text-sm cursor-pointer hover:opacity-60\">\n                  <input\n                    type=\"checkbox\"\n                    checked={vssApis.length > 0 && selectedApis.size === vssApis.length}\n                    onChange={handleSelectAll}\n                    className=\"w-4 h-4 cursor-pointer\"\n                  />\n                  <span>Select all</span>\n                </label>\n                <button\n                  onClick={handleClearSelection}\n                  className=\"flex items-center gap-1 text-sm cursor-pointer hover:opacity-60\"\n                  title=\"Clear selection\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                  <span>Clear selection</span>\n                </button>\n              </div>\n            </div>\n\n            {/* Signal List */}\n            <div className=\"flex-1 overflow-auto\">\n              {vssApis.length === 0 ? (\n                <div className=\"text-sm text-slate-500 text-center py-4\">No signals available</div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {vssApis.map((api, index) => {\n                    const apiName = getApiName(api);\n                    const apiType = getApiType(api);\n                    const isSelected = selectedApis.has(apiName);\n\n                    return (\n                      <div\n                        key={index}\n                        className=\"flex items-center justify-between p-2 hover:bg-slate-100 rounded\"\n                      >\n                        <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                          <input\n                            type=\"checkbox\"\n                            checked={isSelected}\n                            onChange={() => handleToggleApi(apiName)}\n                            className=\"w-4 h-4 cursor-pointer flex-shrink-0\"\n                          />\n                          <span className=\"text-sm text-slate-700 truncate\">{apiName}</span>\n                        </div>\n                        <span className={`text-xs !font-medium uppercase select-none\n                            px-2 py-1 rounded-full ${getApiTypeClasses(apiType).bgClass} ${getApiTypeClasses(apiType).textClass}`}>\n                          {apiType}\n                        </span>\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"h-[160px] flex flex-col rounded-lg p-2\"\n            style={{ backgroundColor: 'rgba(225, 231, 239, 0.2)' }}>\n            <h2 className=\"text-lg font-bold text-slate-700 mb-2\">Vehicle Properties</h2>\n            <div className=\"flex-1 overflow-auto\">\n              {data?.model?.vehicle_category && <div className=\"flex font-medium items-center gap-2\"\n                style={{ gap: '10px', fontSize: '14px' }}>\n                <div>Category: </div>\n                <div className=\"font-bold\">{data?.model?.vehicle_category}</div>\n              </div>}\n            </div>\n          </div>\n\n          <div className=\"h-[100px] rounded-lg p-2 flex flex-col\"\n            style={{ }}>\n            <p className=\"text-center flex-shrink-0 text-xs\">\n              This prototype is powered by\n            </p>\n            <div className=\"flex w-full h-full items-center justify-center\"\n            style={{ gap: '20px', backgroundColor: 'white' }}>\n              {logos.map((logo) => (\n                <a\n                  className=\"transition cursor-pointer\"\n                  key={logo.name}\n                  href={logo.href}\n                  target=\"__blank\"\n                >\n                  <img\n                    src={logo.src}\n                    className=\"w-full object-contain\"\n                    style={{ height: 'auto', maxHeight: '60px' }}\n                    alt={logo.name + '-logo'}\n                  />\n                </a>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"w-1/2 h-full flex flex-col overflow-auto rounded-lg p-2\"\n          style={{ backgroundColor: 'rgba(225, 231, 239, 0.2)' }}>\n          <h2 className=\"text-lg font-bold text-slate-700 mb-2\">Regulation Compliance</h2>\n          <div className=\"flex-1 overflow-auto\">\n\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],
  "mappings": "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",
  "names": ["React", "api"]
}
