# Sample Page: The HomePage

This document provides a reference implementation for a page that is dynamically composed of other components. It demonstrates how pages act as simple composers, delegating all rendering logic to the **Dynamic Component Architecture**.

> **Relevant Principles:**
> *   [Clarity & Maintainability](./../principle.md#1-clarity-and-maintainability)
> *   [SOLID Principles](./../principle.md#2-solid-principles)
> *   [Dynamic Component Architecture](./../component-design/dynamic-components.md)

---

### 1. The Page Configuration (`config.json`)

First, the page's layout is defined in a simple JSON configuration. This could be stored in a database and managed by an admin or generated by an AI. This configuration references registered component `type` names like `'banner'`.

```json
{
  "rows": [
    {
      "type": "banner",
      "option": {
        "align": "center"
      },
      "data": {
        "title": "Welcome to the Autowrx Platform",
        "subtitle": "A lean, extensible, and AI-driven ecosystem.",
        "backgroundImageUrl": "/images/hero-background.jpg"
      }
    },
    {
      "type": "popular-prototypes-list",
      "option": {
        "limit": 5
      }
    }
  ]
}
```

---

### 2. Component Registration (`src/registerComponents.js`)

For the page to work, the components referenced in the JSON config must be registered. This is done once when the application starts up. Note that we are using `React.lazy()` to adhere to our performance principles.

```jsx
import React from 'react';
import { ComponentRegistry } from './lib/ComponentRegistry';

// Schemas are imported to be included with the registration
import { schema as bannerSchema } from './components/organisms/Banner'; 
import { schema as popularPrototypesSchema } from './components/organisms/PopularPrototypesList'; 

// Registering the components as lazy-loaded modules
ComponentRegistry.register(
  'banner', 
  React.lazy(() => import('./components/organisms/Banner')),
  bannerSchema
);

ComponentRegistry.register(
  'popular-prototypes-list', 
  React.lazy(() => import('./components/organisms/PopularPrototypesList')),
  popularPrototypesSchema
);
```

---

### 3. The Page Implementation (`src/pages/HomePage.js`)

Finally, the `HomePage` component itself is extremely simple. Its only job is to take the configuration and use the central renderer to display the components. It has no direct knowledge of what a "Banner" is.

```tsx
import React from 'react';
import { renderComponentByTypeName } from '../lib/renderComponentByTypeName';

// The page is a "dumb" composer. It receives a config and maps over it.
const HomePage = ({ config }) => {
  return (
    <main className="page-layout">
      {config?.rows?.map((componentConfig, index) => (
        <section key={index}>
          {renderComponentByTypeName(
            componentConfig.type, 
            componentConfig.option, 
            componentConfig.data
          )}
        </section>
      ))}
    </main>
  );
};

export default HomePage;
```

### How It Adheres to Our Principles

1.  **Single Responsibility Principle:** The page's single responsibility is to orchestrate the layout of components based on a configuration. It is not responsible for what those components are or how they work.
2.  **Dependency Inversion Principle:** This is a perfect example of DIP. The high-level `HomePage` does not depend on the low-level `Banner` or `PopularPrototypesList`. Instead, both depend on the `renderComponentByTypeName` abstraction. This makes the `HomePage` incredibly stable and easy to change via configuration alone.
3.  **Clarity and Maintainability:** The page's code is trivial to read and understand. All the complexity is in the configuration and the components themselves, which is exactly where it belongs.
